<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>baizn的github博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="baizn的github博客">
<meta property="og:url" content="http://baizn.github.io/index.html">
<meta property="og:site_name" content="baizn的github博客">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="baizn的github博客">
<meta name="twitter:description">
  
    <link rel="alternative" href="/atom.xml" title="baizn的github博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  <link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="/img/avatar.png" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">baizn</a></h1>
		</hgroup>

		
				


		
			<div id="switch-btn" class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						<li>友情链接</li>
						
						
						<li>关于我</li>
						
					</ul>
				</div>
			</div>
		

		<div id="switch-area" class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives/">所有文章</a></li>
				        
							<li><a href="/tags/">标签云</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<ul class="social">
							
								<li id="Email"><a class="Email" target="_blank" href="/baizhanning@zhubajie.com" title="Email"></a></li>
					        
								<li id="GitHub"><a class="GitHub" target="_blank" href="https://github.com/baizn/baizn.github.io" title="GitHub"></a></li>
					        
								<li id="RSS"><a class="RSS" target="_blank" href="/atom.xml" title="RSS"></a></li>
					        
						</ul>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/Ajax/" style="font-size: 10px;">Ajax</a> <a href="/tags/BFC/" style="font-size: 10px;">BFC</a> <a href="/tags/CORS/" style="font-size: 10px;">CORS</a> <a href="/tags/CSS/" style="font-size: 13.33px;">CSS</a> <a href="/tags/Cache/" style="font-size: 10px;">Cache</a> <a href="/tags/Cookie/" style="font-size: 10px;">Cookie</a> <a href="/tags/Document/" style="font-size: 10px;">Document</a> <a href="/tags/Drag/" style="font-size: 10px;">Drag</a> <a href="/tags/ECMAScript/" style="font-size: 16.67px;">ECMAScript</a> <a href="/tags/ES6/" style="font-size: 10px;">ES6</a> <a href="/tags/Float/" style="font-size: 10px;">Float</a> <a href="/tags/Flux/" style="font-size: 10px;">Flux</a> <a href="/tags/Function/" style="font-size: 10px;">Function</a> <a href="/tags/JavaScript/" style="font-size: 20px;">JavaScript</a> <a href="/tags/MEAT/" style="font-size: 10px;">MEAT</a> <a href="/tags/Object/" style="font-size: 10px;">Object</a> <a href="/tags/Promise/" style="font-size: 10px;">Promise</a> <a href="/tags/Props/" style="font-size: 10px;">Props</a> <a href="/tags/React/" style="font-size: 16.67px;">React</a> <a href="/tags/Redux/" style="font-size: 13.33px;">Redux</a> <a href="/tags/SPA/" style="font-size: 10px;">SPA</a> <a href="/tags/Thunk/" style="font-size: 10px;">Thunk</a> <a href="/tags/action/" style="font-size: 10px;">action</a> <a href="/tags/after伪元素/" style="font-size: 10px;">after伪元素</a> <a href="/tags/alt/" style="font-size: 10px;">alt</a> <a href="/tags/ant-design/" style="font-size: 10px;">ant-design</a> <a href="/tags/async/" style="font-size: 10px;">async</a> <a href="/tags/clearfix/" style="font-size: 10px;">clearfix</a> <a href="/tags/codeSplitting/" style="font-size: 10px;">codeSplitting</a> <a href="/tags/div/" style="font-size: 10px;">div</a> <a href="/tags/div拖拽/" style="font-size: 10px;">div拖拽</a> <a href="/tags/instanceof/" style="font-size: 10px;">instanceof</a> <a href="/tags/meat/" style="font-size: 10px;">meat</a> <a href="/tags/prototype/" style="font-size: 10px;">prototype</a> <a href="/tags/reducer/" style="font-size: 10px;">reducer</a> <a href="/tags/referrer/" style="font-size: 10px;">referrer</a> <a href="/tags/state/" style="font-size: 10px;">state</a> <a href="/tags/store/" style="font-size: 10px;">store</a> <a href="/tags/type-file/" style="font-size: 10px;">type=file</a> <a href="/tags/typeof/" style="font-size: 10px;">typeof</a> <a href="/tags/webpack/" style="font-size: 13.33px;">webpack</a> <a href="/tags/事件处理/" style="font-size: 10px;">事件处理</a> <a href="/tags/优化/" style="font-size: 10px;">优化</a> <a href="/tags/优缺点/" style="font-size: 10px;">优缺点</a> <a href="/tags/作用域/" style="font-size: 10px;">作用域</a> <a href="/tags/单页面Web应用/" style="font-size: 10px;">单页面Web应用</a> <a href="/tags/原型链/" style="font-size: 10px;">原型链</a> <a href="/tags/坐标/" style="font-size: 10px;">坐标</a> <a href="/tags/垃圾回收/" style="font-size: 10px;">垃圾回收</a> <a href="/tags/客户端/" style="font-size: 10px;">客户端</a> <a href="/tags/对象/" style="font-size: 10px;">对象</a> <a href="/tags/异步/" style="font-size: 10px;">异步</a> <a href="/tags/引用类型/" style="font-size: 10px;">引用类型</a> <a href="/tags/执行环境/" style="font-size: 10px;">执行环境</a> <a href="/tags/术语/" style="font-size: 10px;">术语</a> <a href="/tags/样式修改/" style="font-size: 10px;">样式修改</a> <a href="/tags/检测/" style="font-size: 10px;">检测</a> <a href="/tags/清除浮动/" style="font-size: 10px;">清除浮动</a> <a href="/tags/生命周期/" style="font-size: 10px;">生命周期</a> <a href="/tags/类型检测/" style="font-size: 10px;">类型检测</a> <a href="/tags/纯函数/" style="font-size: 10px;">纯函数</a> <a href="/tags/继承/" style="font-size: 10px;">继承</a> <a href="/tags/自动分号插入/" style="font-size: 10px;">自动分号插入</a> <a href="/tags/跨域/" style="font-size: 10px;">跨域</a> <a href="/tags/跨浏览器/" style="font-size: 10px;">跨浏览器</a> <a href="/tags/连续赋值/" style="font-size: 10px;">连续赋值</a> <a href="/tags/遇到的问题/" style="font-size: 10px;">遇到的问题</a>
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="https://hexo.io">Hexo</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="https://pages.github.com/">GitHub</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://moxfive.xyz/">MOxFIVE</a>
			        
			        </div>
				</section>
				

				
				
				<section class="switch-part switch-part4">
				
					<div id="js-aboutme">人活着如果没有梦想，那和咸鱼还有什么区别－－－专注于前端, 专注于JavaScript</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">baizn</a></h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<a href="/" class="profilepic">
				<img lazy-src="/img/avatar.png" class="js-avatar">
			</a>
			<hgroup>
			  <h1 class="header-author"><a href="/" title="回到主页">baizn</a></h1>
			</hgroup>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives/">所有文章</a></li>
		        
					<li><a href="/tags/">标签云</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
						<ul class="social">
							
								<li id="Email"><a class="Email" target="_blank" href="/baizhanning@zhubajie.com" title="Email"></a></li>
					        
								<li id="GitHub"><a class="GitHub" target="_blank" href="https://github.com/baizn/baizn.github.io" title="GitHub"></a></li>
					        
								<li id="RSS"><a class="RSS" target="_blank" href="/atom.xml" title="RSS"></a></li>
					        
						</ul>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap">
  
    <article id="post-跨浏览器的事件处理" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/01/11/跨浏览器的事件处理/" class="article-date">
  	<time datetime="2016-01-11T09:42:26.000Z" itemprop="datePublished">2016-01-11</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/11/跨浏览器的事件处理/">跨浏览器的事件处理</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="跨浏览器的事件对象">跨浏览器的事件对象</h2><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> EventUtil = &#123;</span><br><span class="line">	addHandler: function(element, type, handler) &#123;</span><br><span class="line">		<span class="keyword">if</span>(element.addEventListener) &#123;</span><br><span class="line">			element.addEventListener(type, handler, <span class="keyword">false</span>);</span><br><span class="line">		&#125; <span class="function"><span class="keyword">else</span> <span class="title">if</span>(<span class="params">element.attachEvent</span>) </span>&#123;</span><br><span class="line">			element.attachEvent(<span class="string">'on'</span> + type, handler);</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			element[<span class="string">'on'</span> + type] = handler;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;,</span><br><span class="line">	getEvent: function(<span class="keyword">event</span>) &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">event</span> ? <span class="keyword">event</span> : window.<span class="keyword">event</span>;</span><br><span class="line">	&#125;,</span><br><span class="line">	getTarget: function(<span class="keyword">event</span>) &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">event</span>.target || <span class="keyword">event</span>.srcElement;</span><br><span class="line">	&#125;,</span><br><span class="line">	preventDefault: function(<span class="keyword">event</span>) &#123;</span><br><span class="line">		<span class="keyword">if</span>(<span class="keyword">event</span>.preventDefault) &#123;</span><br><span class="line">			<span class="keyword">event</span>.preventDefault();</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="keyword">event</span>.returnValue = <span class="keyword">false</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;,</span><br><span class="line">	removeHandler: function(element, type, handler) &#123;</span><br><span class="line">		<span class="keyword">if</span>(element.removeEventListener) &#123;</span><br><span class="line">			element.removeEventListener(type, handler, <span class="keyword">false</span>);</span><br><span class="line">		&#125; <span class="function"><span class="keyword">else</span> <span class="title">if</span>(<span class="params">element.detachEvent</span>) </span>&#123;</span><br><span class="line">			element.detachEvent(<span class="string">'on'</span> + type, handler);</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			element[<span class="string">'on'</span> + type] = <span class="keyword">null</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;,</span><br><span class="line">	stopPropagation: function(<span class="keyword">event</span>) &#123;</span><br><span class="line">		<span class="keyword">if</span>(<span class="keyword">event</span>.stopPropagation) &#123;</span><br><span class="line">			<span class="keyword">event</span>.stopPropagation();</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="keyword">event</span>.cancelBubble = <span class="keyword">true</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="comment">//获取相关元素属性，只对mouseover和mouseout起作用</span></span><br><span class="line">	getRelatedTarget: function(<span class="keyword">event</span>) &#123;</span><br><span class="line">		<span class="keyword">if</span>(<span class="keyword">event</span>.relatedTarget) &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">event</span>.relatedTarget;</span><br><span class="line">		&#125; <span class="function"><span class="keyword">else</span> <span class="title">if</span> (<span class="params"><span class="keyword">event</span>.toElement</span>) </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">event</span>.toElement;</span><br><span class="line">		&#125; <span class="function"><span class="keyword">else</span> <span class="title">if</span> (<span class="params"><span class="keyword">event</span>.fromElement</span>) </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">event</span>.fromElement;</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="comment">//获取按的鼠标的那个键</span></span><br><span class="line">	getButton: function(<span class="keyword">event</span>) &#123;</span><br><span class="line">		<span class="keyword">if</span>(document.implementation.hasFeature(<span class="string">'mouseEvents'</span>, <span class="string">'2.0'</span>)) &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">event</span>.button;</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="keyword">switch</span>(<span class="keyword">event</span>.button) &#123;</span><br><span class="line">				<span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">				<span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">				<span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">				<span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">				<span class="keyword">case</span> <span class="number">7</span>:</span><br><span class="line">					<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">				<span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">				<span class="keyword">case</span> <span class="number">6</span>:</span><br><span class="line">					<span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">				<span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">					<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="comment">//获取鼠标滚轮滚动的wheelDelta属性值</span></span><br><span class="line">	getWheelDelta: function(<span class="keyword">event</span>) &#123;</span><br><span class="line">		<span class="keyword">if</span>(<span class="keyword">event</span>.wheelDelta) &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">event</span>.wheelDelta;</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="keyword">return</span> -<span class="keyword">event</span>.detail*<span class="number">40</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="comment">//获取键盘按键的charCode属性，该属性存储的是按键字符的ASCII码</span></span><br><span class="line">	getCharCode: function(<span class="keyword">event</span>) &#123;</span><br><span class="line">		<span class="keyword">if</span>(<span class="keyword">typeof</span> <span class="keyword">event</span>.charCode === <span class="string">'number'</span>) &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">event</span>.charCode;</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">event</span>.keyCode;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="comment">//获取剪切板里面的内容</span></span><br><span class="line">    getClipboardText: function(<span class="keyword">event</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> clipboardData = (<span class="keyword">event</span>.clipboardData || window.clipboardData);</span><br><span class="line">        <span class="keyword">return</span> clipboardData.getData(<span class="string">'text'</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//设置剪切板里面的内容</span></span><br><span class="line">    setClipboardText: function(<span class="keyword">event</span>, <span class="keyword">value</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">event</span>.clipboardData) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">event</span>.clipboardData.setData(<span class="string">'text/plain'</span>, <span class="keyword">value</span>);</span><br><span class="line">        &#125; <span class="function"><span class="keyword">else</span>  <span class="title">if</span>(<span class="params">window.clipboardData</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> window.clipboardData.setData(<span class="string">'text'</span>, <span class="keyword">value</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

      
      

      <!-- page.path 表示不含根路径的页面网址。还有数种方式可以匹配页面，在此不赘述。 -->
        
    </div>
    
    <div class="article-info article-info-index">
      
      

      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/">JavaScript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/事件处理/">事件处理</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/跨浏览器/">跨浏览器</a></li></ul>
	</div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>










  
    <article id="post-MEAT的十大作用" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/01/11/MEAT的十大作用/" class="article-date">
  	<time datetime="2016-01-11T09:40:46.000Z" itemprop="datePublished">2016-01-11</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/11/MEAT的十大作用/">MEAT的十大作用</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="MEAT的十大作用">MEAT的十大作用</h2><h3 id="1_显示及排列中文">1 显示及排列中文</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">meta</span> <span class="attribute">http-equiv</span>=<span class="value">"Content-type"</span></span><br><span class="line">	<span class="attribute">content</span>=<span class="value">"text/html; charset=utf-8"</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>说明：Content-Type ==&gt; 文件内容格式；<br>content内容为对文件的设置。</p>
<h3 id="2_让搜索引擎容易搜索到">2 让搜索引擎容易搜索到</h3><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta <span class="property">name</span>=<span class="string">"KeyWords"</span> content=<span class="string">"css'home page' html"</span>&gt;</span><br><span class="line">&lt;meta <span class="property">name</span>=<span class="string">"KeyWords"</span> content=<span class="string">"javascript '白占宁'"</span>&gt;</span><br></pre></td></tr></table></figure>
<p>说明：KeyWords ==&gt; 关键字，关键字中英文均可。</p>
<h3 id="3_关于网站内容描述">3 关于网站内容描述</h3><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta <span class="property">name</span>=<span class="string">"Description"</span> content=<span class="string">"javascript教学课程"</span>&gt;</span><br></pre></td></tr></table></figure>
<p>说明：Description ==&gt; 内容的主要描述</p>
<h3 id="4_标注网页作者">4 标注网页作者</h3><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta <span class="property">name</span>=<span class="string">"Author"</span> content=<span class="string">"baizn"</span>&gt;</span><br></pre></td></tr></table></figure>
<p>说明：本网页作者信息</p>
<h3 id="5_用何种编辑器完成的">5 用何种编辑器完成的</h3><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta <span class="property">name</span>=<span class="string">"Generator"</span> content=<span class="string">"Mozilla/3.0Gold(Win95)[Netscape]"</span>&gt;</span><br></pre></td></tr></table></figure>
<p>说明：Generator==&gt;编辑器</p>
<p>Mozilla/3.0Gold(Win95)[Netscape]编辑器版本说明</p>
<h3 id="6_网页何时完成">6 网页何时完成</h3><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta <span class="property">name</span>=<span class="string">"Creation-Date"</span> content=<span class="string">"01-jan-2015 00:00:00"</span>&gt;</span><br></pre></td></tr></table></figure>
<p>说明：Creation-Date ==&gt; 创建日期</p>
<h3 id="7_网页的有效期及不被Cache所限制">7 网页的有效期及不被Cache所限制</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">meta</span> <span class="attribute">name</span>=<span class="value">"Expired"</span> <span class="attribute">content</span>=<span class="value">"01-jan-2015 00:00:00"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">meta</span> <span class="attribute">http-equiv</span>=<span class="value">"Pragma"</span> <span class="attribute">content</span>=<span class="value">"no-cache"</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>说明：Expired ==&gt; 网页终止期限；</p>
<p>no_cache ==&gt; 不记录cache信息，网站没有记忆功能。</p>
<h3 id="8_网页作者的网址和邮箱">8 网页作者的网址和邮箱</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">meta</span> <span class="attribute">rev</span>=<span class="value">"made"</span> <span class="attribute">href</span>=<span class="value">"mailto:baizn@xx.com"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">meta</span> <span class="attribute">rev</span>=<span class="value">"made"</span> <span class="attribute">href</span>=<span class="value">"http://www.bzn.com"</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>说明：rev ==&gt; 正向关联；<br>made ==&gt; 网页制造者；<br>href ==&gt; 邮箱或网址。</p>
<h3 id="9_网页自动换页">9 网页自动换页</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">meta</span> <span class="attribute">http-equiv</span>=<span class="value">"refresh"</span> <span class="attribute">content</span>=<span class="value">"15; url:=http://www.bzn.com/"</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>说明：refresh ==&gt; 更新或重加载；</p>
<p>15 ==&gt; 15秒执行下一动作；</p>
<p>url ==&gt; 指定跳转到此网页。</p>
<h3 id="10_进入或离开网页的特效（限IE）">10 进入或离开网页的特效（限IE）</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">meta</span> <span class="attribute">http-equiv</span>=<span class="value">"指定要换页特效发生的状况"</span> <span class="attribute">content</span>=<span class="value">"特效模式(Duration=特效持续时间, Transition=代替的特效)"</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>说明：http-equiv的取值<br>Page-Enter: 进入页面；<br>Page-Exit: 离开页面；<br>Site-Enter: 进入本网站；<br>Site-Exit: 离开本网站。<br>content取值<br>revealTrans: 指定换页特效；<br>blendTrans: 设定换页效果为混合。<br>Duration: 设定特效持续时间；<br>Transition: 以0－23代替特效。</p>

      
      

      <!-- page.path 表示不含根路径的页面网址。还有数种方式可以匹配页面，在此不赘述。 -->
        
    </div>
    
    <div class="article-info article-info-index">
      
      

      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MEAT/">MEAT</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/meat/">meat</a></li></ul>
	</div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>










  
    <article id="post-React中Props的传递" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/01/11/React中Props的传递/" class="article-date">
  	<time datetime="2016-01-11T09:38:09.000Z" itemprop="datePublished">2016-01-11</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/11/React中Props的传递/">React中Props的传递</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="传递Props">传递Props</h2><p>React里有一个非常常用的模式就是对组件做一层抽象。组件对外公开一个简单的属性［Props］来实现功能。</p>
<p>可以使用<strong>JSX展开属性</strong>来合并现有的props和其他值：</p>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> &lt;Component &#123;...<span class="keyword">this</span>.props&#125; more=<span class="string">"values"</span> /&gt;;</span><br></pre></td></tr></table></figure>
<p>如果不使用JSX，可以使用一些对象辅助方法如ES6的<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">### &#25163;&#21160;&#20256;&#36882;&#10;&#22823;&#37096;&#20998;&#24773;&#20917;&#19979;&#24212;&#35813;&#26174;&#24335;&#22320;&#21521;&#19979;&#20256;&#36882;props&#65292;&#36825;&#26679;&#21487;&#20197;&#30830;&#20445;&#21482;&#20844;&#24320;&#20320;&#35748;&#20026;&#26159;&#23433;&#20840;&#30340;&#20869;&#37096;API&#30340;&#23383;&#38598;&#12290;</span><br></pre></td></tr></table></figure></p>
<p>var FancyCheckBox = React.createClass({<br>    render() {<br>        var fancyClass = this.props.checked ? ‘FancyChecked’ : ‘FancyUnchecked’;<br>        return (<br>            <div classname="{fancyClass}" onclick="{this.props.onClick}"><br>                {this.props.children}<br>            </div><br>        );<br>    }<br>});</p>
<p>React.render(<br>    <fancycheckbox checked="{true}" onclick="{consoe.log.bind(console)}"><br>        Hello world!<br>    </fancycheckbox>,<br>    document.body<br>);<br><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">但如果还有name、title等很多属性时候怎么办呢？</span><br><span class="line"><span class="comment">### 在JSX里使用 ... 传递</span></span><br><span class="line">有时把所有的属性都传下去是不安全的，这时可以使用的<span class="keyword">*</span><span class="keyword">*</span>[解构赋值](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment)<span class="keyword">*</span><span class="keyword">*</span>中的剩余属性特性来把未知属性批量提取出来。</span><br></pre></td></tr></table></figure></p>
<p>var {checked, …other} = this.props;<br><figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">这样能确保把所有的props传下去，除了已经使用了的属性。</span><br><span class="line"></span><br><span class="line">使用<span class="escape">``</span><span class="escape">`.</span>..<span class="escape">``</span><span class="escape">`特</span>性重写上面的示例：</span><br></pre></td></tr></table></figure></p>
<p>var FancyCheckBox = React.createClass({<br>    render() {<br>        var {checked, …other} = this.props;<br>        var fancyClass = checked ? ‘FancyChecked’ : ‘FancyUnchecked’;<br>        //other包含{onClick: console.log} 但checked属性除外<br>        return (<br>            <div {...other}="" classname="{fancyClass}"><br>        );<br>    }<br>});</div></p>
<p>React.render(<br>    <fancycheckbox checked="{true}" onclick="{consoe.log.bind(console)}"><br>        Hello world!<br>    </fancycheckbox>,<br>    document.body<br>);<br><figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### 传递和使用同一个Props</span><br><span class="line">如果组件需要使用一个属性又要往下传递，可以直接使用<span class="escape">``</span><span class="escape">`c</span>hecked=&#123;checked&#125;<span class="escape">``</span><span class="escape">`再</span>传一次，这样做比传整个this.props对象要好，因为更利于重构和语法检查。</span><br></pre></td></tr></table></figure></p>
<p>var CheckBox = React.createClass({<br>    render() {<br>        var {checked, title, …other} = this.props;<br>        var box = checked ? ‘ok’ : ‘no’;<br>        var boxTitle = checked: ‘X’ : ‘Y’;<br>        return(<br>            <label><br>                <input {...other}="" checked="{checked}" type="checkbox"><br>                {title}<br>            </label><br>        );<br>    }<br>});<br>```</p>

      
      

      <!-- page.path 表示不含根路径的页面网址。还有数种方式可以匹配页面，在此不赘述。 -->
        
    </div>
    
    <div class="article-info article-info-index">
      
      

      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Props/">Props</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/React/">React</a></li></ul>
	</div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>










  
    <article id="post-Redux详解" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/01/11/Redux详解/" class="article-date">
  	<time datetime="2016-01-11T09:33:49.000Z" itemprop="datePublished">2016-01-11</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/11/Redux详解/">Redux详解</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Redux详解">Redux详解</h2><p>redux是Facebook提出的flux架构的一种优秀实现，而且不局限于为react提供数据状态处理。它是零依赖的，可以配合其他任何框架或者类库一起使用。要配合react，还的引入react-redux。</p>
<h3 id="action">action</h3><p>数据来源不确定 ，我们需要专门的处理函数，在各个数据源里筛选真正需要的数据，不让那些无关紧要的、甚至是脏数据污染了全局数据对象。</p>
<p>这种对数据来源做萃取工作的函数，就叫action。action不是［数据预处理］的功能，而是在web应用中所有的数据与状态的变化，几乎都来自［事件］。</p>
<p>javascript中的事件：DOM事件、ajax、路由change、setTimeout定时器、自定义事件等。</p>
<h4 id="action与event(事件)的区别">action与event(事件)的区别</h4><p>在表单keyup事件中，只在e.keyCode等于回车键或取消键时，才出发一类action。DOM事件提供的数据是event对象，里面主要包括跟DOM相关的数据，我们无法直接合并到全局数据对象里，只是将需要的部分数据传入action函数而已。所以，<strong>是event响应函数里主动调用了action函数，并且传入它需要的数据。</strong></p>
<h3 id="reducer">reducer</h3><p>action仅仅是预处理，将脏数据筛选掉，但没有产生可以直接合并到全局对象的数据和结构，甚至可能只是提供了线索，表示［需要获取那些数据，但数据不在我这里］。action函数的设计，也为它［只提供线索］的做法提供了支持，action函数必须返回一个带有<strong>type</strong>属性的plain object。</p>
<h4 id="action函数的设计理念">action函数的设计理念</h4><blockquote>
<ul>
<li><p>action的参数用来筛选掉脏数据，调用action函数的人，有义务传入他需要的数据</p>
</li>
<li><p>action返回的plain object中包含属性为type常量值</p>
<blockquote>
<p><em>表明这个对象携带的其他数据应该被［如何］再处理
</em>或者不带其他数据，仅仅启示已有数据需要如何调整，或需要主要获取那些数据</p>
</blockquote>
</li>
</ul>
</blockquote>
<p><strong>reducer就是处理action函数返回的线索的［数据再处理函数］，action是［预处理函数］。</strong></p>
<p>由于action返回的数据有个固定的结构，所以reducer函数也有固定的结构。</p>
<figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">//reducer函数接收两个参数:  全局数据对象<span class="keyword">state</span>以及action函数返回的action对象</span><br><span class="line">//返回新的全局数据对象new <span class="keyword">state</span></span><br><span class="line">export <span class="keyword">default</span>(<span class="keyword">state</span>, action) =&gt; &#123;</span><br><span class="line">	switch(action.type) &#123;</span><br><span class="line">		case A:</span><br><span class="line">			return handleA(<span class="keyword">state</span>);</span><br><span class="line">		<span class="keyword">default</span>:</span><br><span class="line">			return <span class="keyword">state</span>; //没有匹配上就直接返回原<span class="keyword">state</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>reducer只是一个<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#### &#20026;&#20160;&#20040;&#21483;reducer&#20989;&#25968;&#10;&#22240;&#20026;action&#23545;&#35937;&#21508;&#31181;&#21508;&#26679;&#65292;&#27599;&#31181;&#23545;&#24212;&#26576;&#20010;case&#65292;&#20294;&#26368;&#21518;&#37117;&#27719;&#24635;&#21040;state&#23545;&#35937;&#65292;&#20174;&#22810;&#21040;&#19968;&#65292;&#26159;&#19968;&#20010;&#20943;&#23569;&#65288;reduce&#65289;&#30340;&#36807;&#31243;&#65292;&#25152;&#20197;&#23436;&#25104;&#36825;&#20010;&#36807;&#31243;&#30340;&#20989;&#25968;&#23601;&#21483;```reducer```&#12290;&#10;### combineReducers&#10;reducer&#30340;&#31532;&#19968;&#20010;&#21442;&#25968;&#26159;&#20840;&#23616;&#23545;&#35937;&#65292;&#22240;&#27492;state&#23545;&#35937;&#30340;&#26641;&#24418;&#32467;&#26500;&#24517;&#23450;&#20250;&#38543;&#30528;web&#24212;&#29992;&#30340;&#22797;&#26434;&#24615;&#32780;&#21464;&#24471;&#36234;&#26469;&#36234;&#28145;&#65292;&#24403;action.type&#25152;&#23545;&#24212;&#30340;case&#21482;&#26159;&#20462;&#25913;state.a.b.c&#36825;&#20010;&#23646;&#24615;&#26102;&#65292;handleCase&#20989;&#25968;&#23601;&#20250;&#23884;&#22871;&#30340;&#29305;&#21035;&#28145;&#65292;&#24517;&#39035;&#22312;&#36825;&#20010;&#20989;&#25968;&#30340;&#22836;&#37096;&#39564;&#35777;state&#23545;&#35937;&#26377;&#27809;&#26377;&#37027;&#20010;&#23646;&#24615;&#12290;&#10;&#38656;&#35201;&#22914;&#19979;&#27169;&#24335;&#65306;</span><br></pre></td></tr></table></figure></p>
<p>//这个reducer的state属性不是全局state本身<br>//而是他的一个子代属性，如state.todos这个对象<br>//返回的new state也会合并到state.todos对象中<br>export default (state, action) =&gt; {<br>    switch(action.type) {<br>        case B:<br>            return newstate;<br>    }<br>}<br><figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">如上所示，写起来是普通的reducer，但获取的不是全局的state。</span><br><span class="line"></span><br><span class="line">**实现方法：**遍历一个［全是方法］的［函数储存对象］，返回新对象，这个新对象的<span class="escape">``</span><span class="escape">`k</span>ey<span class="escape">``</span><span class="escape">`跟</span>［函数储存对象］一样，它的<span class="escape">``</span><span class="escape">`v</span>alue<span class="escape">``</span><span class="escape">`则</span>是［函数储存对象］的同名方法接收<span class="escape">``</span><span class="escape">`(</span>state[key], action)<span class="escape">``</span><span class="escape">`参</span>数的返回值。</span><br><span class="line"></span><br><span class="line">目前redux不提供映射到一级以上深度的state的方法，解决思路：</span><br><span class="line">&gt;* superGetter／superSetter</span><br><span class="line">&gt;* 嵌套combineReducers</span><br><span class="line">&gt;* 修改源码，使用模式走transformer</span><br><span class="line"></span><br><span class="line"><span class="label">详情参考[这里](http:</span>//div.io/topic/<span class="number">1309</span>)。</span><br><span class="line"></span><br><span class="line">总的来说，combineReduers不是一个必需品，它只是用来分发对象的属性到各个<span class="escape">``</span><span class="escape">`r</span>educer<span class="escape">``</span><span class="escape">`中</span>去，如果觉得太绕，可以直接选择在每个handleCase函数中查询state属性，合成newState并返回即可，这时候，只需要一个reducers函数，它的switch语句处理所有可能的action.type。</span><br><span class="line">### createStore</span><br><span class="line">action函数只返回一个普通对象，是谁把它传递到reducers(state, action)调用呢？<span class="escape">``</span><span class="escape">`r</span>educers | state | action<span class="escape">``</span><span class="escape">`这</span>三个由谁来协调？</span><br><span class="line"></span><br><span class="line">此时，createStore(reducer, initialState)呼之欲出，它接收一个reducer函数跟initialState初始化的全局状态对象，返回几个［公共方法］：<span class="escape">``</span><span class="escape">`d</span>ispatch | getState | subscribe<span class="escape">``</span><span class="escape">`。</span></span><br><span class="line"></span><br><span class="line"><span class="escape">``</span><span class="escape">`c</span>reateStore<span class="escape">``</span><span class="escape">`的</span>返回值是一个对象，通常保存在store这个变量名里。其实store只是一个方法，没有数据属性的对象，用<span class="escape">``</span><span class="escape">`J</span>SON.stringify<span class="escape">``</span><span class="escape">`去</span>序列化，得到的是空对象。真正的<span class="escape">``</span><span class="escape">`s</span>tate<span class="escape">``</span><span class="escape">`包</span>含在必包中，通过公用方法<span class="escape">``</span><span class="escape">`g</span>etState<span class="escape">``</span><span class="escape">`获</span>取。</span><br><span class="line"></span><br><span class="line">而<span class="escape">``</span><span class="escape">`d</span>ispatch<span class="escape">``</span><span class="escape">`方</span>法，是<span class="escape">``</span><span class="escape">`s</span>tore<span class="escape">``</span><span class="escape">`对</span>象提供的更改<span class="escape">``</span><span class="escape">`c</span>urrentState<span class="escape">``</span><span class="escape">`这</span>个必包变量的唯一建议途径。</span><br><span class="line"></span><br><span class="line"><span class="escape">``</span><span class="escape">`s</span>ubscribe<span class="escape">``</span><span class="escape">`方</span>法是一个简单的事件侦听方法，在dispatch里更新完currentState后调用，不管是什么action触发的更新，都会被调用，并且没有任何参数，只是告诉你<span class="escape">``</span><span class="escape">`s</span>tate<span class="escape">``</span><span class="escape">`更</span>新了。</span><br><span class="line">### bindActionCreators</span><br><span class="line">通过<span class="escape">``</span><span class="escape">`c</span>reateStore<span class="escape">``</span><span class="escape">`拿</span>到了<span class="escape">``</span><span class="escape">`s</span>tore<span class="escape">``</span><span class="escape">`，</span>通过<span class="escape">``</span><span class="escape">`s</span>tore.dispatch(action)<span class="escape">``</span><span class="escape">`我</span>们可以免去手动调用<span class="escape">``</span><span class="escape">`r</span>educer<span class="escape">``</span><span class="escape">`的</span>负担，只处理<span class="escape">``</span><span class="escape">`a</span>ction<span class="escape">``</span><span class="escape">`就</span>可以了。这里有两种意义上的<span class="escape">``</span><span class="escape">`a</span>ction<span class="escape">``</span><span class="escape">`，</span>一种是<span class="escape">``</span><span class="escape">`a</span>ction<span class="escape">``</span><span class="escape">`函</span>数，一种是<span class="escape">``</span><span class="escape">`a</span>ction<span class="escape">``</span><span class="escape">`对</span>象，<span class="escape">``</span><span class="escape">`a</span>ction<span class="escape">``</span><span class="escape">`函</span>数接收参数并返回一个<span class="escape">``</span><span class="escape">`a</span>ction<span class="escape">``</span><span class="escape">`对</span>象。</span><br><span class="line"></span><br><span class="line"><span class="escape">``</span><span class="escape">`a</span>ction<span class="escape">``</span><span class="escape">`函</span>数是工厂模式，专门生产<span class="escape">``</span><span class="escape">`a</span>ction<span class="escape">``</span><span class="escape">`对</span>象。所以通过重命名，更清晰的区分两者，<span class="escape">``</span><span class="escape">`a</span>ction<span class="escape">``</span><span class="escape">`函</span>数就叫<span class="escape">``</span><span class="escape">`a</span>ctionCreator<span class="escape">``</span><span class="escape">`，</span>它的返回值叫<span class="escape">``</span><span class="escape">`a</span>ction<span class="escape">``</span><span class="escape">`。</span></span><br><span class="line"></span><br><span class="line"><span class="escape">``</span><span class="escape">`s</span>tore.dispatch(action)<span class="escape">``</span><span class="escape">`这</span>里的action是对象，而不是函数，它是actionCreator返回的，所以实际上要这样调用<span class="escape">``</span><span class="escape">`s</span>tore.dispatch(actionCreator(...args))<span class="escape">``</span><span class="escape">`。</span></span><br><span class="line"></span><br><span class="line">原本的<span class="escape">``</span><span class="escape">`r</span>educer(state, action)<span class="escape">``</span><span class="escape">`模</span>式，用<span class="escape">``</span><span class="escape">`c</span>reateStore(reducer, initalState)<span class="escape">``</span><span class="escape">`转</span>换成<span class="escape">``</span><span class="escape">`s</span>tore.dispatch(action)<span class="escape">``</span><span class="escape">`，</span>发现还不够，再封装一层，这就是函数式思想的体现，通过反复组合，将多参数模式，转化成单参数模式。</span><br><span class="line">#### 怎样组合</span><br><span class="line">&gt;单个actionCreator，通过bindActionCreator。</span><br></pre></td></tr></table></figure></p>
<p>//将actionCreator和dispatch绑定<br>let bindActionCreator =&gt; (actionCreator, dispatch) {<br>    return (…args) =&gt; dispatch(actionCreator(…args));<br>}<br>//普通工厂函数，返回一个对象<br>let addItem = text =&gt; ({<br>    type: ‘ADD_ITEM’,<br>    text<br>})<br>//跟store.dispatch绑定，成为真正可以改变currentState的action函数<br>let addItem = bindActionCreator(addItem, store.dispatch);<br><figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;对于多个actionCreator，可以像reducers一样，组成一个<span class="escape">``</span><span class="escape">`k</span>ey/action<span class="escape">``</span><span class="escape">`组</span>合。</span><br></pre></td></tr></table></figure></p>
<p>export default function bindActionCreators(actionCreators, dispatch) {<br>    if(typeof actionCreators === ‘function’) {<br>        return bindActionCreator(actionCreators, dispatch);<br>    }<br>    //返回一个改造过的[函数组合]<br>    return mapValues(actionCreators, actionCreator =&gt; bindActionCreator(actionCreator, dispatch))<br>}<br><figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">如上，我们用<span class="escape">``</span><span class="escape">`b</span>indActionCreator<span class="escape">``</span><span class="escape">`得</span>到了真正具有改变全局state能力的许多函数，接下来就是将这些函数分发到各个地方，由各个<span class="escape">``</span><span class="escape">`e</span>vent<span class="escape">``</span><span class="escape">`自</span>主调用即可。</span><br><span class="line">### redux工作流程</span><br><span class="line">&gt;首先，需要设计一些［常量］，因为action.type通常是字符串常量。为了便于集中管理，以及利于压缩代码，所以最好将常量单独放在单独的文件夹里，根据类型的不同放置在不同的文件夹中。</span><br></pre></td></tr></table></figure></p>
<p>//ActionTypes.js 真正改动了数据的 actionType 在这里<br>export const ADD_ITEM = ‘ADD_ITEM’<br>export const DELETE_ITEM = ‘DELETE_ITEM’<br>export const DELETE_ITEMS = ‘DELETE_ITEMS’<br>export const UPDATE_ITEM = ‘UPDATE_ITEM’<br>export const UPDATE_ITEMS = ‘UPDATE_ITEMS’</p>
<p>//API.js 服务端接口统一放这里<br>export const API_TODOS = ‘/todos’</p>
<p>//SocketTypes.js websocket 也触发了某个 action 改变了 state，单独放这里<br>export const SERVER_UPDATE = ‘SERVER_UPDATE’</p>
<p>//KeyCode.js 键盘的回车键与取消键对应的编码<br>export const ENTER_KEY = 13<br>export const ESCAPE_KEY = 27</p>
<p>//FilterTypes.js 只是筛选数据，没有改变 state 的过滤 action 的常量<br>export const FILTER_ITEMS = ‘FILTER_ITEMS’<br>export const SHOW_ALL = ‘SHOW_ALL’<br>export const SHOW_ACTIVE = ‘SHOW_ACTIVE’<br>export const SHOW_COMPLETED = ‘SHOW_COMPLETED’<br><figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">通过常量设计，可以清晰地反应出我们整个web应用的业务架构设计，这方面如果没设计好，随着应用复杂性的增加，会越来越难以维护。</span><br><span class="line">&gt;比设计常量更靠前的，是设计整个应用的<span class="keyword">state</span>树的结构</span><br><span class="line">&gt;有了常量，就可以写```actionCreator```了，它们被放置在actions文件里</span><br></pre></td></tr></table></figure></p>
<p>//index.js<br>import * as types from ‘../constants/ActionTypes’</p>
<p>export function addItem(text) {<br>    return { type: types.ADD_ITEM, text }<br>}<br><figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&gt;action是预处理，下一个环节是再处理函数```reducer```，它们被放置再reducers文件夹里</span><br><span class="line"></span><br><span class="line"><span class="comment">#### redux的流程</span></span><br><span class="line">&gt;* 设计全局<span class="keyword">state</span>的数据结构</span><br><span class="line">&gt;* 设计更改<span class="keyword">state</span>数据的actionTypes常量以及其他跟视图展现相关的actionTypes常量</span><br><span class="line">&gt;* 根据actionTypes常量，写actionCreator</span><br><span class="line">&gt;* 根据各个actionCreator的返回值，涉及reducer做数据的最后处理</span><br><span class="line">&gt;* 在有了reducer函数之后，creatorStore(reducer, initState)得到store对象</span><br><span class="line">&gt;* 用bindActionCreators函数将actionCreators和store.dispatch绑定起来，得到一组能够修改全局状态的函数</span><br><span class="line">&gt;* 分发各个状态修改函数到各个DOM事件中</span><br><span class="line"></span><br><span class="line"><span class="comment">#### action creator函数</span></span><br></pre></td></tr></table></figure></p>
<p>function makeActionCreator(type, …argNames) {<br>    return function(…args) {<br>        let action = {type};<br>        argNames.forEach((arg, index) =&gt; {<br>            action[argNames[index]] = args[i];<br>        });<br>        return action;<br>    }<br>}</p>
<p>export const addTodo = makeActionCreator(‘ADD_TODO’, ‘todo’);<br>```</p>
<p>参考资料：<a href="http://div.io/topic/1309" target="_blank" rel="external">深入到源码：解读 redux 的设计思路与用法 </a>。</p>

      
      

      <!-- page.path 表示不含根路径的页面网址。还有数种方式可以匹配页面，在此不赘述。 -->
        
    </div>
    
    <div class="article-info article-info-index">
      
      

      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Redux/">Redux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/action/">action</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/reducer/">reducer</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/store/">store</a></li></ul>
	</div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>










  
    <article id="post-Redux三大原则" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/01/11/Redux三大原则/" class="article-date">
  	<time datetime="2016-01-11T09:29:57.000Z" itemprop="datePublished">2016-01-11</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/11/Redux三大原则/">Redux三大原则</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>##redux三大原则</p>
<p>###单一数据源<br><strong>整个应用的state被储存在一颗对象树中，它只有一个单一的store。</strong></p>
<p>###State是只读的<br><strong>唯一改变state的办法就是触发action，action是一个描述要发生什么的对象。</strong><br>让视图和网络请求不能直接修改state，相反只能表达出需要修改的意图。因为所有的修改都被集中化处理，且严格按照顺序一个接一个执行，因此没有模棱两可的情况。action就是一个普通对象，因此它们可以被日志打印、序列化、储存／后期调试或测试时回放出来。</p>
<p>###纯函数的形式来执行<br><strong>为了描述action如何改变state树，需要编写reducers。</strong><br>Reducer只是一些纯函数，它接收之前的state和action，并返回新的state。reducer只是普通函数，可以控制它们被调用的顺序，并传入附加数据，甚至可以编写可复用的reducer来做一些通用任务，如分页器等。</p>

      
      

      <!-- page.path 表示不含根路径的页面网址。还有数种方式可以匹配页面，在此不赘述。 -->
        
    </div>
    
    <div class="article-info article-info-index">
      
      

      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Redux/">Redux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/state/">state</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/纯函数/">纯函数</a></li></ul>
	</div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>










  
    <article id="post-React生命周期详解" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/01/11/React生命周期详解/" class="article-date">
  	<time datetime="2016-01-11T09:27:44.000Z" itemprop="datePublished">2016-01-11</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/11/React生命周期详解/">React生命周期详解</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="React_生命周期详解">React 生命周期详解</h2><p>通过react-lifecycle mixin查看组件生命周期的执行顺序。</p>
<p>组件在生命周期的不同状态下的执行顺序</p>
<blockquote>
<ul>
<li><p>首次装载组件时，按顺序执行<strong>getDefaultProps</strong>, <strong>getInitialState</strong>, <strong>componentWillMount</strong>, <strong>render</strong>和<strong>componentDidMount</strong></p>
</li>
<li><p>当卸载组件时，执行<strong>componentWillUnomunt</strong></p>
</li>
<li><p>当重新装载组件时，此时按顺序执行<strong>getInitialState</strong>, <strong>componentWillMount</strong>, <strong>render</strong>,和<strong>componentDidMount</strong>,但不执行<strong>getDefaultProps</strong></p>
</li>
<li><p>当再次渲染组件时，组件接收到更新状态(props改变)，此时按顺序执行<strong>componentWillReceiveProps(state变化时候不会执行该方法)</strong>, <strong>shouldComponentUpdate</strong>, <strong>componentWillUpdate</strong>, <strong>render</strong>和<strong>componentDidUpdate</strong></p>
</li>
</ul>
</blockquote>
<h3 id="自定义组件生命周期">自定义组件生命周期</h3><p>自定义组件生命周期主要通过三种状态进行管理：<strong>MOUNTING</strong>, <strong>RECEIVE_PROPS</strong>, <strong>UNMOUNTING</strong>。它们负责通知组件当前所处状态，应该执行生命周期中的哪些步骤，是否可以更新state。这三个状态对应三个方法：<strong>mountComponent()</strong>, <strong>updateComponent()</strong>, <strong>unmountComponent()</strong>。</p>
<blockquote>
<ul>
<li>mountComponent -&gt; MOUNTING</li>
<li>updateComponent -&gt; RECEIVE_PROPS</li>
<li>unmountComponent -&gt; UNMOUNTING</li>
</ul>
</blockquote>
<h4 id="创建自定义组件">创建自定义组件</h4><p>通过<strong>createClass</strong>创建自定义组件的入口方法，负责管理生命周期中的getDefaultProps。getDefaultProps方法只执行一次，因此所有实例初始化的props将会被共享。</p>
<h3 id="MOUNTING状态">MOUNTING状态</h3><p>mountComponent负责管理生命周期中的<strong>getInitialState()</strong>, <strong>componentWillMount()</strong>, <strong>render()</strong>,和<strong>componentDidMount()</strong>。</p>
<p><strong>getDefaultProps()</strong>是通过Constructor进行管理，因此是整个生命周期中最先执行的方法，在mountComponent中无法调用到getDefaultProps方法。所以<strong>getDefaultProps只执行一次</strong>。</p>
<p><strong>ReactCompositeComponentBase</strong>返回的是一个虚拟节点，因此需要利用<strong>instantiateReactComponent</strong>去得到实例，再使用<strong>mountComponent</strong>拿到结果作为当前自定义元素的结果。</p>
<blockquote>
<ul>
<li><p>通过<strong>mountComponent()</strong>装载组件，此时将状态设置为<strong>MOUNTING</strong>，利用<strong>getInitialState()</strong>获取初始化state，初始化更新队列</p>
</li>
<li><p>如果存在<strong>componentWillMount()</strong>，则执行；如果此时在componentWillMount中调用setState，不会触发<strong>render</strong>，而是进行<strong>state合并</strong></p>
</li>
<li>完成MOUNTING的工作，更新状态为NULL，同时也将执行更新操作，此刻在<strong>render()</strong>中可以获取更新后的<strong>this.state</strong>数据</li>
</ul>
</blockquote>
<p>mountComponent本质上是通过递归渲染内容的，因此父组件的componentWillMount一定在其子组件的componentWillMount之前调用，而父组件的componentDidMount肯定在其子组件的componentDidMount之后调用。</p>
<h3 id="RECEIVE_PROPS状态">RECEIVE_PROPS状态</h3><p><strong>updateComponent()</strong>负责管理生命周期中的<strong>componentWillReceiveProps()</strong>, <strong>shouldComponentUpdate()</strong>, <strong>componentWillUpdate()</strong>, <strong>render()</strong>和<strong>componentDidUpdate()</strong>方法。</p>
<p>通过<strong>updateComponent</strong>更新组件，如果元素前后不一致则需要进行更新组件，此时将状态设置为<strong>RECEIVING_PROPS</strong>。</p>
<p>如果存在<strong>componentWillReceiveProps()</strong>，则执行；如果此时在componentReceiveProps()中调用setState，是不会触发重新render，而是进行state合并。</p>
<p>此时完成了RECEIVING_PROPS的工作，更新状态为NULL，同时state也将执行更新，此刻this.state可以获取到更新后的数据。</p>
<blockquote>
<p>如果在componentWillReceiveProps中调用setState，那么在componentWillReceiveProps, shouldComponentUpdate和componentWillUpdate中还是无法获取到更新后的this.state，此时访问this.state仍然是未更新的数据。只有在render和componentDidUpdate中才能获取到更新后的this.state。</p>
</blockquote>
<p>调用<strong>shouldComponentUpdate()</strong>判断是否需要进行组件更新，如果存在<strong>componentWillUpdate()</strong>则执行。</p>
<p>当渲染完成后，如果存在<strong>componentDidUpdate()</strong>则触发。</p>
<p>updateComponent本质上也是通过递归渲染内容的，因此父组件的componentWillUpdate()一定在其子组件的componentWillUpdate()之前调用；而父组件的componentDidUpdate()一定在其子组件的componentDidUpdate()之后调用。</p>
<p><strong>重要提示：</strong>禁止在shouldComponentUpdate()和componentWillUpdate()中调用setState，这样会造成循环调用。</p>
<h3 id="UNMOUNTING状态">UNMOUNTING状态</h3><p><strong>unmountComponent()</strong>负责管理生命周期中的<strong>componentWillUnmount()</strong>。</p>
<p>首先将状态设置为<strong>UNMOUNTING</strong>，如果存在<strong>componentWillUnmount()</strong>则执行；如果此时在componentWillUnmount()中调用setState，不会触发重新render。更新状态为NULL，完成组件卸载操作。</p>
<h3 id="setState更新机制">setState更新机制</h3><p>当调用setState时，会对state以及_pendingState更新队列进行合并操作，真正更新state的是<strong>replaceState</strong>。</p>
<p><strong>replaceState</strong>会先判断当前状态是否为<strong>MOUNTING</strong>，如果不是即会调用<strong>ReactUpdates.enqueueUpdate()</strong>执行更新。</p>
<p>当状态不为MOUNTING或RECEIVING_PROPS时，<strong>performUpdateIfNecessary</strong>会获取_pendingElement, _pendingState, _pendingForceUpdate, 并调用<strong>updateComponent</strong>进行组件更新。</p>
<blockquote>
<p>如果在shouldComponentUpdate或componentWillUpdate中调用setState，此时的状态已经从RECEIVING_PROPS-&gt;NULL,则performUpdateIfNecessary就会调用updateComponent进行组件更新，但updateComponent又会调用 shouldComponentUpdate和componentWillUpdate，因此造成循环调用，使得浏览器内存被占满后崩溃。</p>
</blockquote>
<h3 id="小结">小结</h3><blockquote>
<ul>
<li>React通过三种状态：MOUNTING, RECEIVE_PROPS, UNMOUNTING管理整个生命周期的执行顺序</li>
<li>setState会先进行_pendingState更新队列的合并操作，不会立即渲染，因此setState是异步操作，且通过判断状态(MOUNTING, RECEIVE_PROPS)来控制渲染的时机</li>
<li>不建议在getDefaultProps, getInitialState, shouldComponentUpdate, componentWillUpdate, render和componentWillUpdate中调用setState，特别不能在shouldComponentUpdate和componentWillUpdate中调用setState，会导致循环调用。</li>
</ul>
</blockquote>
<h3 id="参考资料">参考资料</h3><p><a href="http://web.jobbole.com/84296/" target="_blank" rel="external">React源码系列－生命周期的管理</a></p>

      
      

      <!-- page.path 表示不含根路径的页面网址。还有数种方式可以匹配页面，在此不赘述。 -->
        
    </div>
    
    <div class="article-info article-info-index">
      
      

      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/React/">React</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/生命周期/">生命周期</a></li></ul>
	</div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>










  
    <article id="post-JavaScript连续赋值" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/01/11/JavaScript连续赋值/" class="article-date">
  	<time datetime="2016-01-11T09:25:08.000Z" itemprop="datePublished">2016-01-11</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/11/JavaScript连续赋值/">JavaScript连续赋值</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>##JavaScript连续赋值<br>先看一段简单的代码：</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = &#123;<span class="keyword">n</span>: 1&#125;;</span><br><span class="line">a.x = a = &#123;<span class="keyword">n</span>: 2&#125;;</span><br><span class="line">console.<span class="literal">log</span>(a.x);</span><br></pre></td></tr></table></figure>
<p>上面的代码会打印出什么内容呢？// undefined</p>
<p>再看下面这段代码：</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = &#123;<span class="keyword">n</span>: 1&#125;;</span><br><span class="line"><span class="keyword">var</span> b = a;</span><br><span class="line">a.x = a = &#123;<span class="keyword">n</span>: 2&#125;;</span><br><span class="line">console.<span class="literal">log</span>(b.x, a.x);</span><br></pre></td></tr></table></figure>
<p>上面这段代码又会打印出什么内容呢？</p>
<p>不卖关子，直接上答案：</p>
<blockquote>
<p>第一部分代码会打印出： undefined;</p>
<p>第二部分代码会打印出：Object {n: 2}, undefined</p>
</blockquote>
<p>实际的执行过程：从右到左赋值，a被赋值为{n: 2}，接着a.x被赋值为{n: 2}。这里很重要的一点就是：a = {n: 2}中的a指向的是对象{n: 2}，而a.x={n: 2}中的a指向的是原对象{n: 1}。</p>

      
      

      <!-- page.path 表示不含根路径的页面网址。还有数种方式可以匹配页面，在此不赘述。 -->
        
    </div>
    
    <div class="article-info article-info-index">
      
      

      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/">JavaScript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/连续赋值/">连续赋值</a></li></ul>
	</div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>










  
    <article id="post-详解CSS之浮动" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/12/11/详解CSS之浮动/" class="article-date">
  	<time datetime="2015-12-11T04:15:55.000Z" itemprop="datePublished">2015-12-11</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/11/详解CSS之浮动/">详解CSS之浮动</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="详解CSS之浮动">详解CSS之浮动</h2><h3 id="浮动带来的缺陷">浮动带来的缺陷</h3><blockquote>
<ul>
<li>元素设置浮动后，会影响它的兄弟元素</li>
<li>浮动的元素脱离了文档流（仍在文档流中），包含它的父元素不会因为这个浮动元素的存在而自动撑高，这样就会造成父元素高度塌陷的问题</li>
</ul>
</blockquote>
<h3 id="清除浮动常见的方法">清除浮动常见的方法</h3><p>在受影响的兄弟元素上设置clear:both;属性后，不会跟浮动元素同行，而是占据一整行，也不是根据内容自动调整宽度。</p>
<p>clear的原理：clear会为元素添加足够的空白空间，使得该元素的位置会放置在它之前得一个浮动元素之下，这跟增加元素外边距使得元素占据满行而强制换行得效果是一样得。</p>
<p>使用在受影响的兄弟元素上设置clear:both;属性得方法后，只是清除了浮动元素对兄弟元素得影响，并没有解决父元素高度塌陷得问题，因此，我们需要更高级得清除浮动：<strong>闭合浮动</strong>。</p>
<h4 id="空div方法">空div方法</h4><p>在浮动元素后面添加:</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.clearfix &#123;</span><br><span class="line">	clear:both;</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="keyword">div</span> <span class="type">class</span>=<span class="string">"clearfix"</span>&gt;&lt;/<span class="keyword">div</span>&gt;</span><br></pre></td></tr></table></figure>
<h4 id="overflow方法">overflow方法</h4><p>在浮动元素得父元素上设置overflow得值为hidden或auto，可以闭合浮动。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.clearfix &#123;</span><br><span class="line">	overflow: hidden;</span><br><span class="line">	*zoom: <span class="number">1</span>; <span class="comment">//IE6中触发hasLayout</span></span><br><span class="line">&#125;</span><br><span class="line">&lt;div <span class="keyword">class</span>=<span class="string">"clearfix"</span>&gt;</span><br><span class="line">	&lt;div <span class="keyword">class</span>=<span class="string">"left"</span>&gt;<span class="keyword">float</span> left&lt;/div&gt;</span><br><span class="line">	&lt;div <span class="keyword">class</span>=<span class="string">"left"</span>&gt;left&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>使用overflow可能产生得问题：当元素内包括会超出父元素边界的子元素时，可能会覆盖掉有用的子元素，或是产生多余的滚动条。</p>
<h4 id="使用:after伪元素的方法">使用:after伪元素的方法</h4><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">.clearfix &#123;</span><br><span class="line">	*zoom: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">.clearfix:<span class="keyword">after</span> &#123;</span><br><span class="line">	content: '',</span><br><span class="line">	display: block;</span><br><span class="line">	height: <span class="number">0</span>,</span><br><span class="line">	clear: both;</span><br><span class="line">	visibility: hidden;</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="keyword">div</span> <span class="type">class</span>=<span class="string">"box clearfix"</span>&gt;</span><br><span class="line">	&lt;<span class="keyword">div</span> <span class="type">class</span>=<span class="string">"main left"</span>&gt;left1&lt;/<span class="keyword">div</span>&gt;</span><br><span class="line">	&lt;<span class="keyword">div</span> <span class="type">class</span>=<span class="string">"foot left"</span>&gt;left2&lt;/<span class="keyword">div</span>&gt;</span><br><span class="line">&lt;/<span class="keyword">div</span>&gt;</span><br></pre></td></tr></table></figure>
<h3 id="清除浮动方法的实质——CSS_Clear与BFC特性">清除浮动方法的实质——CSS Clear与BFC特性</h3><blockquote>
<ul>
<li>利用clear属性：包括在浮动元素尾部添加一个带有clear:both属性的空div来闭合元素，其实利用:after伪元素方法也是在元素尾部添加一个内容为空白字符并带有clear:both属性的元素的实现的</li>
<li>触发浮动元素父元素的BFC，使得该父元素可以包含浮动元素</li>
</ul>
</blockquote>
<h3 id="参考资料">参考资料</h3><p><a href="http://kayosite.com/remove-floating-style-in-detail.html" target="_blank" rel="external">详说清除浮动</a></p>

      
      

      <!-- page.path 表示不含根路径的页面网址。还有数种方式可以匹配页面，在此不赘述。 -->
        
    </div>
    
    <div class="article-info article-info-index">
      
      

      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CSS/">CSS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Float/">Float</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/after伪元素/">after伪元素</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/clearfix/">clearfix</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/清除浮动/">清除浮动</a></li></ul>
	</div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>










  
    <article id="post-详解CSS之BFC" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/12/11/详解CSS之BFC/" class="article-date">
  	<time datetime="2015-12-11T03:18:32.000Z" itemprop="datePublished">2015-12-11</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/11/详解CSS之BFC/">详解CSS之BFC</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="详解CSS之BFC">详解CSS之BFC</h2><h3 id="什么是BFC">什么是BFC</h3><p>W3C中对BFC的定义</p>
<blockquote>
<p>Floats, absolutely positioned elements, block containers (such as inline-blocks, table-cells, and table-captions) that are not block boxes, and block boxes with ‘overflow’ other than ‘visible’ (except when that value has been propagated to the viewport) establish new block formatting contexts for their contents.</p>
</blockquote>
<p>简单翻译出来就是：浮动元素，绝对定位元素和块级容器（比如inline-blocks, table-cells和table-captions）非块级盒子，以及overflow不为visible（除过当该值已经传递到了viewport）的块级盒子，都会给它们的内容创建新的块状格式化上下文，即传说中的<strong>BFC</strong>。</p>
<p>通俗的理解就是：BFC中元素布局不受外界的影响，并且在一个BFC中，块级盒子和行级盒子都会垂直沿着其父元素的边框排列。利用BFC特性可以消除浮动元素对其非浮动同级元素和子元素的影响。从功能上看，BFC可以看作是隔离了的独立容器，容器里面的元素不会在布局上影响到外面的元素。</p>
<p>BFC就是一种属性，这种属性会影响元素的定位以及与其兄弟元素之间的相互作用。</p>
<h3 id="如何触发BFC">如何触发BFC</h3><blockquote>
<ul>
<li>浮动元素：float除none以外的值</li>
<li>绝对定位元素：position值为absolute或fixed</li>
<li>display值为以下之一：inline-block, table-cells, table-captions</li>
<li>overflow除了visible以外的值（hidden，auto，scroll）</li>
</ul>
</blockquote>
<h3 id="BFC的特性">BFC的特性</h3><blockquote>
<p>BFC会阻止外边距折叠</p>
</blockquote>
<p>两个相邻的div在垂直方向上的外边距会发生折叠，但我们布局时候如果不需要外边距折叠，则可以利用BFC的阻止外边距特性。</p>
<blockquote>
<p>BFC可以包含浮动元素</p>
</blockquote>
<p>BFC会根据子元素的情况自动适应高度，即使其子元素中包括浮动元素。</p>
<blockquote>
<p>BFC可以阻止元素被浮动元素覆盖</p>
</blockquote>
<p>浮动元素的块状兄弟元素会无视浮动元素的位置，尽量占满一整行，这样就会被浮动元素覆盖，为该兄弟元素触发BFC后可以阻止这种情况发生。</p>
<h3 id="合并外边距与BFC">合并外边距与BFC</h3><p>CSS中，相邻的两个盒子（同级或包含关系）的外边距可以结合成一个单独的外边距。这种合并外边距的方式被成为折叠，合并以后新的外边距被成为折叠外边距。</p>
<h4 id="外边距折叠时遵循的原则">外边距折叠时遵循的原则</h4><blockquote>
<ul>
<li>两个相邻的外边距都是正数，折叠结果取两者较大的值</li>
<li>两个相邻外边距都是负数，折叠结果取两者绝对值较大的值（即取小的值）</li>
<li>两个相邻外边距一正一负，折叠结果是两者相加的和</li>
</ul>
</blockquote>
<p>外边距折叠的必备条件：<strong>margin必须是相邻的。</strong></p>
<p>根据W3C规范，两个margin是相邻的必须满足一下条件。</p>
<blockquote>
<ul>
<li>必须是常规文档流（非float和非absolute）的块级盒子，并且处于同一个BFC中</li>
<li>没有线盒，没有空隙，没有padding和border将它们分割开</li>
<li><p>都属于垂直方向上相邻的外边距</p>
</li>
<li><p>元素的margin-top与其第一个常规文档流的子元素的margin-top</p>
</li>
<li>元素的margin-bottom与其下一个常规文档流的兄弟元素的margin-top</li>
<li>height为auto的元素的margin-bottom与其最后一个常规文档流的子元素的margin-bottom</li>
<li>高度为0，最小高度为0，不包含常规文档流的子元素，并且自身没有建立新的BFC的元素的margin-top和margin-bottom</li>
</ul>
</blockquote>
<p>由以上条件可知：<strong>创建了BFC的元素不会和其相邻的元素的外边距折叠。</strong></p>
<h3 id="参考资料">参考资料</h3><p>1: <a href="http://kayosite.com/block-formatting-contexts-in-detail.html" target="_blank" rel="external">详说BFC</a></p>

      
      

      <!-- page.path 表示不含根路径的页面网址。还有数种方式可以匹配页面，在此不赘述。 -->
        
    </div>
    
    <div class="article-info article-info-index">
      
      

      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/BFC/">BFC</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CSS/">CSS</a></li></ul>
	</div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>










  
    <article id="post-使用JavaScript修改文件选择框样式" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/11/29/使用JavaScript修改文件选择框样式/" class="article-date">
  	<time datetime="2015-11-29T09:34:14.000Z" itemprop="datePublished">2015-11-29</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/29/使用JavaScript修改文件选择框样式/">使用JavaScript修改文件选择框样式</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="使用JavaScript修改文本框的样式">使用JavaScript修改文本框的样式</h3><p>当上传文件时，默认的文本框样式直接丑到哭，可以使用JS进行自定义样式。基本步骤如下：</p>
<blockquote>
<ul>
<li>隐藏掉type=file的输入框</li>
<li>自定义控件样式</li>
<li>定义事件，当点击自定义控件时，调用隐藏的输入框click事件</li>
</ul>
</blockquote>
<p>基本代码框架如下：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;input <span class="class"><span class="keyword">type</span>=</span><span class="symbol">'fil</span>e' name=<span class="symbol">'fil</span>e' id=<span class="symbol">'fil</span>e' style=<span class="symbol">'display</span>: none;' /&gt;</span><br><span class="line">&lt;div <span class="class"><span class="keyword">class</span>=</span><span class="symbol">'selfstyl</span>e'&gt;</span><br><span class="line">	&lt;input <span class="class"><span class="keyword">type</span>=</span><span class="symbol">'tex</span>t' id=<span class="symbol">'showur</span>l' <span class="class"><span class="keyword">class</span>=</span><span class="symbol">'inputstyl</span>e' disabled /&gt;</span><br><span class="line">	&lt;a <span class="class"><span class="keyword">class</span>=</span><span class="symbol">'btn</span> btn-info' id=<span class="symbol">'triggerFil</span>e'&gt;</span><br><span class="line">		&lt;i <span class="class"><span class="keyword">class</span>=</span><span class="symbol">'icon</span>-folder-open-alt'&gt;&lt;/i&gt;浏览</span><br><span class="line">	&lt;/a&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">$('#file').change(function() &#123;</span><br><span class="line">	<span class="keyword">var</span> path = $(<span class="keyword">this</span>).<span class="keyword">val</span>();</span><br><span class="line">	path = path.split('\\');</span><br><span class="line">	path = path[path.length - <span class="number">1</span>];</span><br><span class="line">	$('#showurl').<span class="keyword">val</span>(path);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

      
      

      <!-- page.path 表示不含根路径的页面网址。还有数种方式可以匹配页面，在此不赘述。 -->
        
    </div>
    
    <div class="article-info article-info-index">
      
      

      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/">JavaScript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/type-file/">type=file</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/样式修改/">样式修改</a></li></ul>
	</div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>










  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
      <div class="footer-left">
        &copy; 2016 baizn
      </div>
        <div class="footer-right">
          <a href="http://hexo.io/" target="_blank" title="快速、简洁且高效的静态博客框架">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="简而不减双栏 Hexo 博客主题">Yelee</a> by MOxFIVE
        </div>
    </div>
    <div class="visit">
      <span id="busuanzi_container_site_pv" style='display:none'>
        <span id="site-visit" >本站到访数: 
        <span id="busuanzi_value_site_uv"></span>
        </span>
      </span>
      <span id="busuanzi_container_page_pv" style='display:none'>
        <span id="page-visit">, 本页阅读量: 
        <span id="busuanzi_value_page_pv"></span>
        </span>
      </span>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="/js/main.js" type="text/javascript"></script>

  <style type="text/css">
    body {
      background: lightgray;
    }
    #container .left-col {
      background: white;
    }
    .article-inner {
      background: white;
    }
    .post-nav-button {
      background: #ececec;
    }
    #header .header-nav .social #GitHub {
      background-color: #bfd3ec;
    }
  </style>




<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<div class="scroll" id="scroll">
<a href="#" title="返回顶部"><i class="fa fa-arrow-up"></i></a>
<a href="#footer" title="转到底部"><i class="fa fa-arrow-down"></i></a>
</div>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div>
</body>
</html>